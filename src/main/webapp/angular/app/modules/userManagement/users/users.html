<div class="row users" ng-controller="users">
    <div class="col-md-4 col-md-push-8">
        <div ui-view="sidebar">
            <div class="filters">
                <h1>Filters</h1>
                <h4>Roles</h4>
                <p>
                    <a href="" class="btn btn-default" ng-class="{'btn-primary':filters.role==''}" ng-click="filter('role', '')">All</a>
                    <a href="" class="btn btn-default" ng-class="{'btn-primary':filters.role=='admin'}" ng-click="filter('role', 'admin')">Admin</a>
                    <a href="" class="btn btn-default" ng-class="{'btn-primary':filters.role=='user'}" ng-click="filter('role', 'user')">User</a>
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-8 col-md-pull-4">
        <div class="row title">
            <div class="col-xs-8">
                <h1>Users</h1>
				<a class="btn btn-primary pull-right" ng-click="refresh()"><span class="glyphicon glyphicon-refresh"></span>Refresh</a>
                <a ui-sref="users.new" class="btn btn-primary pull-right"><span class="glyphicon glyphicon-plus"></span>New user</a>
            </div>
            <div class="col-xs-4">
                <input type="text" class="form-control" ng-model="filters.name" placeholder="Search" ng-change="currentPage=1" />
            </div>
        </div>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th class="col-md-1"><a href="" ng-click="predicate='id';reverse=!reverse">Id</a></th>
                    <th class="col-md-5"><a href="" ng-click="predicate='name';reverse=!reverse">Name</a></th>
                    <th class="col-md-3"><a href="" ng-click="predicate='forname';reverse=!reverse">Forname</a></th>
                    <!-- th class="col-md-3"><a href="" ng-click="predicate='role';reverse=!reverse">Role</a></th-->
					<th class="col-md-1"><a href="" ng-click="predicate='title';reverse=!reverse">Detail</a></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="user in filtered = (data.user | filter:filters) | orderBy:predicate | startFrom:(currentPage-1)*pageSize | limitTo:pageSize" ng-class="{info:id==user.id}">
                    <td>{{ user.id || 'None' }}</td>
                    <td><a ui-sref="users.view({id:user.id})">{{ user.name || 'None' }}</a></td>
                    <td>{{ user.forname || 'None' }}</td>
                    <!-- td>{{ user.role || 'None' }}</td-->
					<td><a ui-sref="users.view({id:user.id})">Detail</a></td>
                </tr>
            </tbody>
        </table>
        <p>Total items: {{ filtered.length }} </p>
        <p>Filtered items: {{ filtered }} </p>
        <p>All items: {{ data.user }} </p>
        <pagination ng-model="currentPage" total-items="filtered.length" items-per-page="pageSize"></pagination>
    </div>
</div>